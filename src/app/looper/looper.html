<div class="w-screen h-screen overflow-scroll select-none"
     [style.background]="statusIndicators"
>
  <table class="table-fixed w-0"
         (click)="this.looper.reset()"
  >
    @for (row of indices; let i = $index; track i) {
      <tr>
        @for (_ of row; let j = $index; track j) {
          <td
            class="w-[80px] h-[24px] relative border-1 border-transparent text-[12px] text-center font-black
            [&:not(:has(*:hover)):hover]:bg-gray-700! [&:not(:has(*:hover)):active]:bg-gray-400!"
            draggable="true"
            [style.background-color]="cellColorAt(i, j)"
            [style.color]="textColorAt(i, j)"
            (dragstart)="onDragStart(i, j)"
            (dragover)="$event.preventDefault()"
            (drop)="onDrop(i, j)"
          >
            {{ dataAt(i, j) }}
            @if (paused && isDst(i, j)) {
              @for (operation of operations; track operation; let idx = $index) {
                <p-button [icon]="iconForOperation(operation)" [rounded]="true" severity="secondary" size="large"
                          draggable="false"
                          class="absolute left-1/2 top-1/2 z-10 origin-top-left"
                          [style.transform]="transformForButtonAt(idx)"
                          (click)="recordAndPlayImmediately(operation); $event.stopPropagation()"
                />
              }
            }
          </td>
        }
      </tr>
    }
  </table>
</div>
